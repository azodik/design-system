import { CodeBlock } from "@/components/docs/CodeBlock";
import { CodeBlockWithPreview } from "@/components/docs/CodeBlockWithPreview";
import { PropsTable } from "@/components/docs/PropsTable";
import { ThemePanel } from "@azodik/ui";

# Theming

Azodik UI is built on a robust theming system powered by CSS variables and a convenient React context. It's designed to be easily customizable and supports dark mode out of the box.

## Setup

To start using the design system, you need to wrap your application with the `ThemeProvider`. This provider manages the current theme, appearance (light/dark), and accent colors.

<CodeBlock language="tsx">
{`import { ThemeProvider } from '@azodik/ui';
import '@azodik/ui/styles.css';

export default function App() {
  return (
    <ThemeProvider defaultTheme="light" defaultAccentColor="indigo" defaultRadius="medium">
      <YourApp />
    </ThemeProvider>
  );
}`}
</CodeBlock>

## Theme Configuration

The `ThemeProvider` accepts several props to configure the default appearance of your application:

<PropsTable props={[
  {
    name: "defaultTheme",
    type: "'light' | 'dark' | 'system'",
    default: "'system'",
    description: "The initial theme mode."
  },
  {
    name: "defaultAccentColor",
    type: "string",
    default: "'indigo'",
    description: "The primary accent color used across components. Options: 'indigo', 'ruby', 'grass', 'amber', 'cyan', 'azodik', etc."
  },
  {
    name: "defaultRadius",
    type: "'none' | 'small' | 'medium' | 'large' | 'full'",
    default: "'medium'",
    description: "The global border radius scale for components."
  },
  {
    name: "defaultPanelBackground",
    type: "'solid' | 'translucent'",
    default: "'translucent'",
    description: "The background style for panels and overlays."
  }
]} />

## Design Tokens

Our design system exposes a set of CSS variables that you can use in your own styles to ensure consistency.

### Colors
We use a 12-scale color system. The most important tokens are:

- `--accent-9`: The primary solid background color (e.g. Buttons).
- `--accent-10`: The hover state for solid backgrounds.
- `--accent-3`: Background for weak/secondary interactions.
- `--color-surface`: The card/panel background color.
- `--color-background`: The page background color.

### Radii
We use a standard radius scale mapped to the `radius` prop:

- `--radius-1`: X-Small (approx 2px)
- `--radius-2`: Small (approx 4px)
- `--radius-3`: Medium (approx 6px)
- `--radius-4`: Large (approx 8px)
- `--radius-5`: X-Large (approx 12px)
- `--radius-round`: 9999px (Full)

## Theme Panel

For development or user preference settings, we provide a `ThemePanel` component that allows live toggling of theme properties.

<CodeBlockWithPreview
  title="Theme Panel Example"
  preview={
    <div className="relative h-64 w-full flex items-center justify-center p-4 border border-gray-200 rounded-lg bg-gray-50 dark:bg-gray-900">
       <div className="text-center space-y-4">
          <p className="text-sm text-gray-500">The panel is usually fixed to the screen edge, but demonstrated here statically.</p>
          {/* ThemePanel is typically a fixed overlay */}
       </div>
    </div>
  }
>
{`import { ThemePanel } from '@azodik/ui';

export default function App() {
  return (
    <>
      <YourContent />
      <ThemePanel /> {/* Adds a floating toggle button */}
    </>
  );
}`}
</CodeBlockWithPreview>

## Customizing CSS

You can override any of the CSS variables in your own stylesheet. It's recommended to scope them to the `:root` or a specific theme class.

```css
:root {
  --font-family-sans: 'Inter', system-ui, sans-serif;
  --space-unit: 4px;
}

[data-accent-color="brand"] {
  --accent-9: #6366f1;
  --accent-10: #4f46e5;
}
```

## Customization

### Custom Accent Colors

The `ThemeProvider` (and `Theme` component) supports custom accent colors. You can pass any valid CSS color value (hex, rgb, etc.) to the `accentColor` prop.

<CodeBlock language="tsx">
{`// Using a custom hex color for the primary accent
<ThemeProvider accentColor="#D946EF">
  {/* Buttons and other accented elements will use this pink color */}
  <Button variant="solid">Pink Button</Button>
</ThemeProvider>`}
</CodeBlock>

> [!IMPORTANT]
> **Custom colors should be set at the root `ThemeProvider` level** (in your `main.tsx` or app entry point), not in nested `ThemeProvider` or `Theme` components. This ensures the custom color applies throughout your entire application without CSS specificity conflicts.

### Custom Fonts

To use a custom font family, you can override the `--font-family-sans` CSS variable using the `style` prop on the `ThemeProvider`.

<CodeBlock language="tsx">
{`// Using a custom font
<ThemeProvider style={{ "--font-family-sans": "'Inter', sans-serif" }}>
  <App />
</ThemeProvider>`}
</CodeBlock>

> [!IMPORTANT]
> **Custom fonts should also be set at the root `ThemeProvider` level** for consistent application-wide typography.

### Complete Example

<CodeBlock language="tsx">
{`// In your main.tsx or app entry point
<ThemeProvider
  defaultTheme="system"
  accentColor="#D946EF"  // Custom pink color
  grayColor="slate"
  radius="medium"
  scaling="100%"
  style={{ "--font-family-sans": "'Inter', sans-serif" }}  // Custom font
>
  <App />
</ThemeProvider>`}
</CodeBlock>

## Subtree Theming

The `Theme` component allows you to override theme settings for a specific part of your application. This is useful for sections that need a different look (e.g., a dark sidebar in a light app).

<CodeBlock language="tsx">
{`import { Theme, Button } from '@azodik/ui';

export default function MyComponent() {
  return (
    <div>
      <Button>Standard Button</Button>
      
      {/* Subtree with different radius and accent */}
      <Theme radius="full" accentColor="ruby">
        <Button>Custom Subtree Button</Button>
      </Theme>
    </div>
  );
}`}
</CodeBlock>

## SSR Flicker Prevention

When using Server-Side Rendering (SSR) with Next.js, Remix, or other frameworks, you can prevent theme flicker by adding a blocking script that runs before React hydrates.

### Next.js App Router

<CodeBlock language="tsx">
{`import { getThemeScript } from '@azodik/ui/server';
import { ThemeProvider } from '@azodik/ui';

export default function RootLayout({ children }) {
  return (
    <html lang="en" suppressHydrationWarning>
      <head>
        <script
          dangerouslySetInnerHTML={{
            __html: getThemeScript({
              storageKey: 'azodik-theme',
              defaultTheme: 'system',
            }),
          }}
        />
      </head>
      <body>
        <ThemeProvider
          defaultTheme="system"
          storageKey="azodik-theme"
        >
          {children}
        </ThemeProvider>
      </body>
    </html>
  );
}`}
</CodeBlock>

### Next.js Pages Router

<CodeBlock language="tsx">
{`import { Html, Head, Main, NextScript } from 'next/document';
import { getThemeScript } from '@azodik/ui/server';

export default function Document() {
  return (
    <Html>
      <Head>
        <script
          dangerouslySetInnerHTML={{
            __html: getThemeScript({
              storageKey: 'azodik-theme',
              defaultTheme: 'system',
            }),
          }}
        />
      </Head>
      <body>
        <Main />
        <NextScript />
      </body>
    </Html>
  );
}`}
</CodeBlock>

> [!IMPORTANT]
> **Make sure the `storageKey` and `defaultTheme` in the script match your `ThemeProvider` props!**

This prevents the flash of incorrect theme that can occur when the server renders with a default theme and the client hydrates with a different theme from localStorage.

